"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[985],{67:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"module-1-ros2/chapter-5-launch-files-packages","title":"Chapter 5: Launch Files and Package Management","description":"Master ROS 2 package structure, Python launch files, and colcon build system to deploy multi-node robotic applications","source":"@site/docs/module-1-ros2/chapter-5-launch-files-packages.mdx","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/chapter-5-launch-files-packages","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-1-ros2/chapter-5-launch-files-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/aamnaashraf/Physical-AI-Humanoid-Robotics/edit/main/docs/module-1-ros2/chapter-5-launch-files-packages.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Chapter 5: Launch Files and Package Management","description":"Master ROS 2 package structure, Python launch files, and colcon build system to deploy multi-node robotic applications","keywords":["launch files","packages","colcon","package.xml","setup.py","workspace","ros2 launch"],"sidebar_position":5,"learning_objectives":["Create Python launch files to manage multi-node systems with parameters and remapping","Build ROS 2 packages with proper directory structure and dependency management","Apply colcon build system to compile and install packages in workspaces","Design reusable packages following ROS 2 conventions and best practices"],"prerequisites":["Chapter 4: URDF Robot Modeling","Python packaging basics","Command-line workspace navigation"],"estimated_time":90,"content_type":"tutorial","difficulty":"intermediate","ros2_distribution":"humble","chapter_number":5}}');var r=s(4848),i=s(8453);const t={title:"Chapter 5: Launch Files and Package Management",description:"Master ROS 2 package structure, Python launch files, and colcon build system to deploy multi-node robotic applications",keywords:["launch files","packages","colcon","package.xml","setup.py","workspace","ros2 launch"],sidebar_position:5,learning_objectives:["Create Python launch files to manage multi-node systems with parameters and remapping","Build ROS 2 packages with proper directory structure and dependency management","Apply colcon build system to compile and install packages in workspaces","Design reusable packages following ROS 2 conventions and best practices"],prerequisites:["Chapter 4: URDF Robot Modeling","Python packaging basics","Command-line workspace navigation"],estimated_time:90,content_type:"tutorial",difficulty:"intermediate",ros2_distribution:"humble",chapter_number:5},o="Chapter 5: Launch Files and Package Management",l={},c=[{value:"5.1 Launch Files: Managing Multi-Node Systems",id:"51-launch-files-managing-multi-node-systems",level:2},{value:"5.1.1 Basic Python Launch File",id:"511-basic-python-launch-file",level:3},{value:"5.1.2 Passing Parameters via Launch Files",id:"512-passing-parameters-via-launch-files",level:3},{value:"5.1.3 Topic and Service Remapping",id:"513-topic-and-service-remapping",level:3},{value:"5.1.4 Launch Arguments for Configuration",id:"514-launch-arguments-for-configuration",level:3},{value:"5.2 ROS 2 Package Structure",id:"52-ros-2-package-structure",level:2},{value:"5.2.1 Standard Package Layout",id:"521-standard-package-layout",level:3},{value:"5.2.2 package.xml: Package Metadata",id:"522-packagexml-package-metadata",level:3},{value:"5.2.3 setup.py: Python Package Configuration",id:"523-setuppy-python-package-configuration",level:3},{value:"5.3 Colcon: The ROS 2 Build System",id:"53-colcon-the-ros-2-build-system",level:2},{value:"5.3.1 Workspace Structure",id:"531-workspace-structure",level:3},{value:"5.3.2 Building Packages with Colcon",id:"532-building-packages-with-colcon",level:3},{value:"5.3.3 Dependency Management with rosdep",id:"533-dependency-management-with-rosdep",level:3},{value:"5.4 Complete Package Example",id:"54-complete-package-example",level:2},{value:"5.4.1 Creating a New Package",id:"541-creating-a-new-package",level:3},{value:"5.4.2 Adding Nodes",id:"542-adding-nodes",level:3},{value:"5.4.3 Updating setup.py",id:"543-updating-setuppy",level:3},{value:"5.4.4 Creating Launch File",id:"544-creating-launch-file",level:3},{value:"5.4.5 Building and Testing",id:"545-building-and-testing",level:3},{value:"5.5 Hands-On Exercise: Complete ROS 2 Package",id:"55-hands-on-exercise-complete-ros-2-package",level:2},{value:"Problem Statement",id:"problem-statement",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Testing",id:"testing",level:3},{value:"Deliverable",id:"deliverable",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"\u2713 Core Concepts Mastered",id:"-core-concepts-mastered",level:3},{value:"Module 1 Complete! \ud83c\udf89",id:"module-1-complete-",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{CodeExample:s,ConceptCallout:a,ExerciseBlock:t}=n;return s||p("CodeExample",!0),a||p("ConceptCallout",!0),t||p("ExerciseBlock",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-5-launch-files-and-package-management",children:"Chapter 5: Launch Files and Package Management"})}),"\n",(0,r.jsx)(n.p,{children:"You've learned to create nodes, communicate via topics/services/actions, and model robots in URDF. But how do you launch 10+ nodes at once? How do you organize code into reusable, distributable packages?"}),"\n",(0,r.jsxs)(n.p,{children:["This final chapter teaches you ",(0,r.jsx)(n.strong,{children:"professional ROS 2 development workflows"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Launch files"})," to start multi-node systems with one command"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Package structure"})," for organizing code, dependencies, and resources"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"colcon build system"})," for compiling and installing packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Best practices"})," for maintainable, shareable robot software"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"By the end, you'll have a complete ROS 2 package ready for deployment and distribution."}),"\n",(0,r.jsx)(n.h2,{id:"51-launch-files-managing-multi-node-systems",children:"5.1 Launch Files: Managing Multi-Node Systems"}),"\n",(0,r.jsxs)(a,{type:"definition",title:"What is a Launch File?",children:[(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"launch file"})," is a Python script that:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Starts multiple nodes with one ",(0,r.jsx)(n.code,{children:"ros2 launch"})," command"]}),"\n",(0,r.jsx)(n.li,{children:"Passes parameters to nodes at startup"}),"\n",(0,r.jsx)(n.li,{children:"Remaps topics/services for integration"}),"\n",(0,r.jsx)(n.li,{children:"Conditionally launches nodes based on arguments"}),"\n",(0,r.jsx)(n.li,{children:"Configures logging and execution order"}),"\n"]}),(0,r.jsx)(n.p,{children:"Think of it as an orchestration script for your robotic system\u2014instead of manually running 8 terminal windows, run one launch command."})]}),"\n",(0,r.jsx)(n.h3,{id:"511-basic-python-launch-file",children:"5.1.1 Basic Python Launch File"}),"\n",(0,r.jsx)(s,{language:"python",filename:"simple_launch.py",difficulty:"beginner",estimatedTime:15,children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n  return LaunchDescription([\n      # Node 1: Temperature sensor\n      Node(\n          package='my_robot_pkg',\n          executable='temperature_sensor',\n          name='temp_sensor_node',\n          output='screen'  # Print logs to console\n      ),\n\n      # Node 2: Temperature monitor\n      Node(\n          package='my_robot_pkg',\n          executable='temperature_monitor',\n          name='temp_monitor_node',\n          output='screen'\n      ),\n  ])\n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Running the launch file:"})}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Launch both nodes with one command\nros2 launch my_robot_pkg simple_launch.py\n\n# Both nodes start automatically with configured names\n"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Components"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"package"})}),": ROS 2 package containing the executable"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"executable"})}),": Name of the Python script or binary (from setup.py entry_points)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"name"})}),": Node name (overrides the name set in Node() constructor)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"output"})}),": Where to send logs (",(0,r.jsx)(n.code,{children:"'screen'"})," or ",(0,r.jsx)(n.code,{children:"'log'"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"512-passing-parameters-via-launch-files",children:"5.1.2 Passing Parameters via Launch Files"}),"\n",(0,r.jsx)(s,{language:"python",filename:"params_launch.py",difficulty:"intermediate",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n  return LaunchDescription([\n      Node(\n          package='my_robot_pkg',\n          executable='parameter_node',\n          name='configured_node',\n          parameters=[{\n              'robot_name': 'atlas',\n              'max_speed': 2.5,\n              'debug_mode': True,\n              'sensor_topics': ['/camera', '/lidar', '/imu']\n          }],\n          output='screen'\n      ),\n  ])\n"}),"\n",(0,r.jsx)(n.p,{children:"Parameters can also be loaded from YAML files:"}),"\n",(0,r.jsx)(s,{language:"python",filename:"yaml_params_launch.py",difficulty:"intermediate",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n  # Get path to config file\n  config = os.path.join(\n      get_package_share_directory('my_robot_pkg'),\n      'config',\n      'robot_params.yaml'\n  )\n\n  return LaunchDescription([\n      Node(\n          package='my_robot_pkg',\n          executable='configurable_node',\n          name='robot_controller',\n          parameters=[config],  # Load from YAML file\n          output='screen'\n      ),\n  ])\n"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"YAML parameter file"})," (",(0,r.jsx)(n.code,{children:"config/robot_params.yaml"}),"):"]}),"\n",(0,r.jsx)(s,{language:"yaml",filename:"robot_params.yaml",children:"robot_controller:\nros__parameters:\n  max_linear_velocity: 1.0\n  max_angular_velocity: 0.5\n  control_frequency: 50.0\n  pid_gains:\n    kp: 1.2\n    ki: 0.1\n    kd: 0.05\n"}),"\n",(0,r.jsx)(n.h3,{id:"513-topic-and-service-remapping",children:"5.1.3 Topic and Service Remapping"}),"\n",(0,r.jsx)(n.p,{children:"Remapping allows you to connect nodes without modifying code:"}),"\n",(0,r.jsx)(s,{language:"python",filename:"remapping_launch.py",difficulty:"intermediate",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n  return LaunchDescription([\n      # Camera node publishes to /camera/image_raw\n      Node(\n          package='usb_cam',\n          executable='usb_cam_node',\n          name='front_camera'\n      ),\n\n      # Object detector expects /image topic\n      # Remap: /image \u2192 /camera/image_raw\n      Node(\n          package='vision_pkg',\n          executable='object_detector',\n          name='detector',\n          remappings=[\n              ('/image', '/camera/image_raw'),\n              ('/detections', '/robot/detected_objects')\n          ]\n      ),\n  ])\n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Why Remapping?"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Integrate third-party packages without code changes"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Run multiple instances of same node with different topics"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Create clear topic hierarchies (",(0,r.jsx)(n.code,{children:"/robot/sensors/camera1"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"514-launch-arguments-for-configuration",children:"5.1.4 Launch Arguments for Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Make launch files configurable with arguments:"}),"\n",(0,r.jsx)(s,{language:"python",filename:"configurable_launch.py",difficulty:"advanced",estimatedTime:20,children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n  # Declare launch arguments\n  use_sim_time_arg = DeclareLaunchArgument(\n      'use_sim_time',\n      default_value='false',\n      description='Use simulation time if true'\n  )\n\n  robot_name_arg = DeclareLaunchArgument(\n      'robot_name',\n      default_value='robot1',\n      description='Name of the robot instance'\n  )\n\n  # Access argument values with LaunchConfiguration\n  use_sim_time = LaunchConfiguration('use_sim_time')\n  robot_name = LaunchConfiguration('robot_name')\n\n  return LaunchDescription([\n      use_sim_time_arg,\n      robot_name_arg,\n\n      Node(\n          package='nav2_bringup',\n          executable='navigation_node',\n          name='navigator',\n          parameters=[{\n              'use_sim_time': use_sim_time,\n              'robot_name': robot_name\n          }],\n          output='screen'\n      ),\n  ])\n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using Launch Arguments:"})}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Use default values\nros2 launch my_robot_pkg configurable_launch.py\n\n# Override arguments\nros2 launch my_robot_pkg configurable_launch.py use_sim_time:=true robot_name:=atlas\n\n# View available arguments\nros2 launch my_robot_pkg configurable_launch.py --show-args\n"}),"\n",(0,r.jsxs)(a,{type:"tip",title:"Launch File Best Practices",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use YAML for parameters"}),": Separate configuration from code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add descriptions to arguments"}),": Help users understand options"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set sensible defaults"}),": Launch file should work with no arguments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Group related nodes"}),": Use namespaces (",(0,r.jsx)(n.code,{children:"namespace='robot1'"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Include other launch files"}),": Modularize complex systems"]}),"\n"]}),(0,r.jsx)(n.p,{children:"Example of including launch files:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\n\r\nIncludeLaunchDescription(\r\n    PythonLaunchDescriptionSource([\r\n        os.path.join(pkg_dir, 'launch', 'sensors.launch.py')\r\n    ])\r\n)\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"52-ros-2-package-structure",children:"5.2 ROS 2 Package Structure"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"ROS 2 package"})," is an organizational unit containing code, dependencies, and resources."]}),"\n",(0,r.jsx)(n.h3,{id:"521-standard-package-layout",children:"5.2.1 Standard Package Layout"}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"my_robot_pkg/\n\u251c\u2500\u2500 package.xml           # Package metadata and dependencies\n\u251c\u2500\u2500 setup.py              # Python package configuration\n\u251c\u2500\u2500 setup.cfg             # Python build configuration\n\u251c\u2500\u2500 resource/             # Package marker file\n\u2502   \u2514\u2500\u2500 my_robot_pkg\n\u251c\u2500\u2500 my_robot_pkg/         # Python source code\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 temperature_sensor.py\n\u2502   \u251c\u2500\u2500 temperature_monitor.py\n\u2502   \u2514\u2500\u2500 utils.py\n\u251c\u2500\u2500 launch/               # Launch files\n\u2502   \u251c\u2500\u2500 sensors.launch.py\n\u2502   \u2514\u2500\u2500 full_system.launch.py\n\u251c\u2500\u2500 config/               # YAML parameter files\n\u2502   \u251c\u2500\u2500 robot_params.yaml\n\u2502   \u2514\u2500\u2500 sensor_config.yaml\n\u251c\u2500\u2500 urdf/                 # Robot description files\n\u2502   \u251c\u2500\u2500 robot.urdf\n\u2502   \u2514\u2500\u2500 robot.urdf.xacro\n\u251c\u2500\u2500 rviz/                 # RViz configuration\n\u2502   \u2514\u2500\u2500 default.rviz\n\u2514\u2500\u2500 test/                 # Unit tests\n  \u251c\u2500\u2500 test_sensor.py\n  \u2514\u2500\u2500 test_monitor.py\n"}),"\n",(0,r.jsx)(n.h3,{id:"522-packagexml-package-metadata",children:"5.2.2 package.xml: Package Metadata"}),"\n",(0,r.jsx)(s,{language:"xml",filename:"package.xml",difficulty:"intermediate",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n<name>my_robot_pkg</name>\n<version>1.0.0</version>\n<description>Temperature monitoring system for robotics</description>\n<maintainer email="your.email@example.com">Your Name</maintainer>\n<license>MIT</license>\n\n\x3c!-- Build tool --\x3e\n<buildtool_depend>ament_python</buildtool_depend>\n\n\x3c!-- Runtime dependencies --\x3e\n<depend>rclpy</depend>\n<depend>std_msgs</depend>\n<depend>sensor_msgs</depend>\n<depend>geometry_msgs</depend>\n\n\x3c!-- Test dependencies --\x3e\n<test_depend>ament_copyright</test_depend>\n<test_depend>ament_flake8</test_depend>\n<test_depend>ament_pep257</test_depend>\n<test_depend>python3-pytest</test_depend>\n\n<export>\n  <build_type>ament_python</build_type>\n</export>\n</package>\n'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dependency Types"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<buildtool_depend>"})}),": Build tools (ament_python, ament_cmake)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<depend>"})}),": Build + runtime dependencies (rclpy, sensor_msgs)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<build_depend>"})}),": Build-only dependencies (code generators)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<exec_depend>"})}),": Runtime-only dependencies (launch files)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<test_depend>"})}),": Testing dependencies (pytest, linters)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"523-setuppy-python-package-configuration",children:"5.2.3 setup.py: Python Package Configuration"}),"\n",(0,r.jsx)(s,{language:"python",filename:"setup.py",difficulty:"intermediate",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'my_robot_pkg'\n\nsetup(\n  name=package_name,\n  version='1.0.0',\n  packages=[package_name],\n  data_files=[\n      # Install package marker\n      ('share/ament_index/resource_index/packages',\n          ['resource/' + package_name]),\n\n      # Install package.xml\n      ('share/' + package_name, ['package.xml']),\n\n      # Install launch files\n      (os.path.join('share', package_name, 'launch'),\n          glob('launch/*.launch.py')),\n\n      # Install config files\n      (os.path.join('share', package_name, 'config'),\n          glob('config/*.yaml')),\n\n      # Install URDF files\n      (os.path.join('share', package_name, 'urdf'),\n          glob('urdf/*.urdf') + glob('urdf/*.xacro')),\n  ],\n  install_requires=['setuptools'],\n  zip_safe=True,\n  maintainer='Your Name',\n  maintainer_email='your.email@example.com',\n  description='Temperature monitoring system for robotics',\n  license='MIT',\n  tests_require=['pytest'],\n  entry_points={\n      'console_scripts': [\n          # Executable name = package.module:function\n          'temperature_sensor = my_robot_pkg.temperature_sensor:main',\n          'temperature_monitor = my_robot_pkg.temperature_monitor:main',\n      ],\n  },\n)\n"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"entry_points"})," Explained"]}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Maps executable names to Python functions"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'temperature_sensor'"})," becomes a command you can run with ",(0,r.jsx)(n.code,{children:"ros2 run"})]}),"\n",(0,r.jsxs)(n.li,{children:["Points to ",(0,r.jsx)(n.code,{children:"main()"})," function in ",(0,r.jsx)(n.code,{children:"my_robot_pkg/temperature_sensor.py"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"53-colcon-the-ros-2-build-system",children:"5.3 Colcon: The ROS 2 Build System"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Colcon"})," (collective construction) is the build tool for ROS 2 packages."]}),"\n",(0,r.jsx)(n.h3,{id:"531-workspace-structure",children:"5.3.1 Workspace Structure"}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"ros2_ws/                 # Workspace root\n\u251c\u2500\u2500 src/                  # Source space (your packages)\n\u2502   \u251c\u2500\u2500 my_robot_pkg/\n\u2502   \u2514\u2500\u2500 vision_pkg/\n\u251c\u2500\u2500 build/                # Build artifacts (auto-generated)\n\u251c\u2500\u2500 install/              # Installed files (auto-generated)\n\u2514\u2500\u2500 log/                  # Build logs (auto-generated)\n"}),"\n",(0,r.jsx)(n.h3,{id:"532-building-packages-with-colcon",children:"5.3.2 Building Packages with Colcon"}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Navigate to workspace root\ncd ~/ros2_ws\n\n# Build all packages\ncolcon build\n\n# Build specific package\ncolcon build --packages-select my_robot_pkg\n\n# Build with debug symbols (for gdb debugging)\ncolcon build --cmake-args -DCMAKE_BUILD_TYPE=Debug\n\n# Build with verbose output\ncolcon build --event-handlers console_direct+\n\n# Clean build (remove build/install directories)\nrm -rf build install log\ncolcon build\n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After building, source the workspace:"})}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Source install space\nsource ~/ros2_ws/install/setup.bash\n\n# Verify package is found\nros2 pkg list | grep my_robot_pkg\n\n# Run nodes from package\nros2 run my_robot_pkg temperature_sensor\nros2 launch my_robot_pkg sensors.launch.py\n"}),"\n",(0,r.jsxs)(a,{type:"warning",title:"Overlay vs. Underlay Workspaces",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Underlay"}),": ROS 2 installation (",(0,r.jsx)(n.code,{children:"/opt/ros/humble"}),")"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Overlay"}),": Your workspace (",(0,r.jsx)(n.code,{children:"~/ros2_ws"}),")"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),(0,r.jsx)(n.p,{children:'When you source an overlay, it extends the underlay. Your packages "override" system packages with the same name.'}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Best Practice"}),": Add both to ",(0,r.jsx)(n.code,{children:"~/.bashrc"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\nsource ~/ros2_ws/install/setup.bash\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"533-dependency-management-with-rosdep",children:"5.3.3 Dependency Management with rosdep"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"rosdep"})," installs package dependencies automatically:"]}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Initialize rosdep (once per system)\nsudo rosdep init\nrosdep update\n\n# Install dependencies for all packages in workspace\ncd ~/ros2_ws\nrosdep install --from-paths src --ignore-src -r -y\n\n# Explanation:\n# --from-paths src: Search src/ for package.xml files\n# --ignore-src: Don't try to install packages from src/\n# -r: Continue despite errors\n# -y: Auto-confirm installations\n"}),"\n",(0,r.jsx)(n.h2,{id:"54-complete-package-example",children:"5.4 Complete Package Example"}),"\n",(0,r.jsx)(n.p,{children:"Let's create a full package with multiple nodes, launch files, and configuration."}),"\n",(0,r.jsx)(n.h3,{id:"541-creating-a-new-package",children:"5.4.1 Creating a New Package"}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Create workspace\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws/src\n\n# Create package\nros2 pkg create --build-type ament_python --dependencies rclpy std_msgs sensor_msgs robot_monitor\n\n# Directory structure created:\n# robot_monitor/\n# \u251c\u2500\u2500 package.xml\n# \u251c\u2500\u2500 setup.py\n# \u251c\u2500\u2500 setup.cfg\n# \u251c\u2500\u2500 resource/robot_monitor\n# \u2514\u2500\u2500 robot_monitor/__init__.py\n"}),"\n",(0,r.jsx)(n.h3,{id:"542-adding-nodes",children:"5.4.2 Adding Nodes"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"robot_monitor/sensor_node.py"}),":"]}),"\n",(0,r.jsx)(s,{language:"python",filename:"sensor_node.py",difficulty:"intermediate",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float32\nimport random\n\nclass SensorNode(Node):\n  def __init__(self):\n      super().__init__('sensor_node')\n\n      self.declare_parameter('sensor_name', 'default_sensor')\n      self.declare_parameter('publish_rate', 1.0)\n\n      sensor_name = self.get_parameter('sensor_name').value\n      rate = self.get_parameter('publish_rate').value\n\n      self.publisher_ = self.create_publisher(Float32, 'sensor_data', 10)\n      self.timer = self.create_timer(1.0 / rate, self.timer_callback)\n\n      self.get_logger().info(f'Sensor \"{sensor_name}\" started at {rate} Hz')\n\n  def timer_callback(self):\n      msg = Float32()\n      msg.data = 20.0 + random.uniform(-5.0, 5.0)\n      self.publisher_.publish(msg)\n\ndef main(args=None):\n  rclpy.init(args=args)\n  node = SensorNode()\n  rclpy.spin(node)\n  node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,r.jsx)(n.h3,{id:"543-updating-setuppy",children:"5.4.3 Updating setup.py"}),"\n",(0,r.jsx)(s,{language:"python",filename:"setup.py",difficulty:"beginner",children:"# Add to entry_points:\nentry_points={\n  'console_scripts': [\n      'sensor_node = robot_monitor.sensor_node:main',\n      'monitor_node = robot_monitor.monitor_node:main',\n  ],\n},\n"}),"\n",(0,r.jsx)(n.h3,{id:"544-creating-launch-file",children:"5.4.4 Creating Launch File"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"launch/system.launch.py"}),":"]}),"\n",(0,r.jsx)(s,{language:"python",filename:"system.launch.py",difficulty:"advanced",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n  # Get config file path\n  config_dir = os.path.join(\n      get_package_share_directory('robot_monitor'),\n      'config'\n  )\n\n  return LaunchDescription([\n      # Launch argument\n      DeclareLaunchArgument(\n          'use_sim_time',\n          default_value='false',\n          description='Use simulation time'\n      ),\n\n      # Sensor node\n      Node(\n          package='robot_monitor',\n          executable='sensor_node',\n          name='temperature_sensor',\n          parameters=[{\n              'sensor_name': 'temp_sensor_1',\n              'publish_rate': 2.0,\n              'use_sim_time': LaunchConfiguration('use_sim_time')\n          }],\n          output='screen'\n      ),\n\n      # Monitor node\n      Node(\n          package='robot_monitor',\n          executable='monitor_node',\n          name='data_monitor',\n          parameters=[{\n              'threshold': 30.0,\n              'use_sim_time': LaunchConfiguration('use_sim_time')\n          }],\n          output='screen'\n      ),\n  ])\n"}),"\n",(0,r.jsx)(n.h3,{id:"545-building-and-testing",children:"5.4.5 Building and Testing"}),"\n",(0,r.jsx)(s,{language:"bash",showLineNumbers:!1,children:"# Build package\ncd ~/ros2_ws\ncolcon build --packages-select robot_monitor\n\n# Source workspace\nsource install/setup.bash\n\n# Test individual node\nros2 run robot_monitor sensor_node --ros-args -p sensor_name:=test\n\n# Launch full system\nros2 launch robot_monitor system.launch.py\n\n# Override launch argument\nros2 launch robot_monitor system.launch.py use_sim_time:=true\n"}),"\n",(0,r.jsx)(n.h2,{id:"55-hands-on-exercise-complete-ros-2-package",children:"5.5 Hands-On Exercise: Complete ROS 2 Package"}),"\n",(0,r.jsxs)(t,{title:"Multi-Node Robot Monitor Package",difficulty:"advanced",estimatedTime:90,objectives:["Create a ROS 2 package with proper directory structure and dependencies","Implement 3 nodes: sensor publisher, data aggregator, alert system","Create launch file that starts all nodes with configurable parameters","Build package with colcon and verify deployment"],hints:["Use ros2 pkg create to generate package scaffold","Add all nodes to setup.py entry_points","Use YAML config file for threshold parameters","Test each node individually before creating launch file","Check dependencies with ros2 pkg list after building"],children:[(0,r.jsx)(n.h3,{id:"problem-statement",children:"Problem Statement"}),(0,r.jsx)(n.p,{children:"Create a complete ROS 2 package for a robot monitoring system with:"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sensor node"}),": Publishes simulated battery, temperature, and CPU metrics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Aggregator node"}),": Subscribes to all sensors, computes statistics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Alert node"}),": Triggers warnings when metrics exceed thresholds"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"requirements",children:"Requirements"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Package Structure"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"robot_health_monitor/\r\n\u251c\u2500\u2500 package.xml (dependencies: rclpy, std_msgs, diagnostic_msgs)\r\n\u251c\u2500\u2500 setup.py (3 entry points)\r\n\u251c\u2500\u2500 robot_health_monitor/\r\n\u2502   \u251c\u2500\u2500 battery_sensor.py\r\n\u2502   \u251c\u2500\u2500 aggregator.py\r\n\u2502   \u2514\u2500\u2500 alert_system.py\r\n\u251c\u2500\u2500 launch/\r\n\u2502   \u2514\u2500\u2500 health_monitor.launch.py\r\n\u251c\u2500\u2500 config/\r\n\u2502   \u2514\u2500\u2500 thresholds.yaml\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Node Specifications"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"battery_sensor"}),": Publish Float32 to ",(0,r.jsx)(n.code,{children:"/battery_level"})," (0-100%) at 1 Hz"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"aggregator"}),": Subscribe to ",(0,r.jsx)(n.code,{children:"/battery_level"}),", ",(0,r.jsx)(n.code,{children:"/temperature"}),", ",(0,r.jsx)(n.code,{children:"/cpu_usage"}),", publish average to ",(0,r.jsx)(n.code,{children:"/system_health"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"alert_system"}),": Subscribe to metrics, log WARN if battery < 20%, temperature > 80\xb0C"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch File"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Start all 3 nodes"}),"\n",(0,r.jsxs)(n.li,{children:["Load ",(0,r.jsx)(n.code,{children:"thresholds.yaml"})," for alert_system"]}),"\n",(0,r.jsxs)(n.li,{children:["Accept ",(0,r.jsx)(n.code,{children:"log_level"})," argument (default: INFO)"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"testing",children:"Testing"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build\r\ncolcon build --packages-select robot_health_monitor\r\nsource install/setup.bash\r\n\r\n# Launch system\r\nros2 launch robot_health_monitor health_monitor.launch.py\r\n\r\n# Verify topics\r\nros2 topic list  # Should show /battery_level, /system_health, etc.\r\nros2 topic hz /battery_level  # Should show ~1 Hz\r\n\r\n# Check alerts appear when battery drops below 20%\n"})}),(0,r.jsx)(n.h3,{id:"deliverable",children:"Deliverable"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Complete package with all files"}),"\n",(0,r.jsxs)(n.li,{children:["Screenshot of ",(0,r.jsx)(n.code,{children:"colcon build"})," success"]}),"\n",(0,r.jsx)(n.li,{children:"Screenshot of all 3 nodes running via launch file with visible log output"}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)("div",{className:"key-takeaways",children:[(0,r.jsx)(n.h3,{id:"-core-concepts-mastered",children:"\u2713 Core Concepts Mastered"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Launch files orchestrate multi-node systems"})," using Python syntax with Node(), parameters, remapping, and arguments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Python packages follow standard structure"})," with package.xml (dependencies), setup.py (entry points), and organized directories (launch, config, urdf)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"colcon builds ROS 2 workspaces"})," compiling packages and creating install spaces that extend the ROS 2 underlay"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"rosdep installs package dependencies"})," automatically from package.xml declarations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Overlay workspaces extend underlays"})," allowing custom packages to override system packages when sourced"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Launch arguments enable configuration"})," through DeclareLaunchArgument and LaunchConfiguration for runtime flexibility"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Best practices separate code and configuration"})," using YAML files, modular launch includes, and proper dependency declarations"]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"module-1-complete-",children:"Module 1 Complete! \ud83c\udf89"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Congratulations!"})," You've completed Module 1: The Robotic Nervous System (ROS 2)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What You've Learned"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 1"}),": ROS 2 architecture, computational graphs, DDS middleware"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 2"}),": Publishers, subscribers, topics, QoS policies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 3"}),": Services, actions, parameters, AI-ROS integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 4"}),": URDF robot modeling, links, joints, RViz2 visualization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chapter 5"}),": Launch files, packages, colcon build system"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Total Time"}),": ~475 minutes (7.9 hours)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next Steps"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review"}),": Revisit key takeaways from each chapter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Practice"}),": Complete any unfinished exercises"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Module 2 Preview"}),": Digital Twin and Gazebo Simulation (Weeks 6-7)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Assessment"}),": Before continuing, ensure you can:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Create a ROS 2 package with multiple nodes"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Write launch files with parameters and remapping"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Build and deploy packages using colcon"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Debug multi-node systems using ROS 2 CLI tools"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next Module"}),": Module 2: Digital Twin Simulation (coming soon)"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function p(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var a=s(6540);const r={},i=a.createContext(r);function t(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);