"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[298],{4684:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"module-1-ros2/chapter-3-services-actions-parameters","title":"Chapter 3: Services, Actions, and Parameters","description":"Master request-response services, long-running actions, and runtime parameters to build sophisticated robotic behaviors","source":"@site/docs/module-1-ros2/chapter-3-services-actions-parameters.mdx","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/chapter-3-services-actions-parameters","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-1-ros2/chapter-3-services-actions-parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/aamnaashraf/Physical-AI-Humanoid-Robotics/edit/main/docs/module-1-ros2/chapter-3-services-actions-parameters.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Chapter 3: Services, Actions, and Parameters","description":"Master request-response services, long-running actions, and runtime parameters to build sophisticated robotic behaviors","keywords":["rclpy","services","actions","parameters","request-response","async","callbacks","AI integration"],"sidebar_position":3,"learning_objectives":["Implement service servers and clients for request-response communication","Create action servers and clients for long-running tasks with feedback","Apply parameters for runtime configuration of nodes","Design AI-ROS integration patterns separating decision logic from communication"],"prerequisites":["Chapter 2: ROS 2 Nodes and Topics","Python async/await basics","Object-oriented programming"],"estimated_time":120,"content_type":"tutorial","difficulty":"intermediate","ros2_distribution":"humble","chapter_number":3},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: ROS 2 Nodes and Topics","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-1-ros2/chapter-2-nodes-topics"},"next":{"title":"Chapter 4: URDF Robot Modeling","permalink":"/Physical-AI-Humanoid-Robotics/docs/module-1-ros2/chapter-4-urdf-robot-modeling"}}');var i=r(4848),t=r(8453);const a={title:"Chapter 3: Services, Actions, and Parameters",description:"Master request-response services, long-running actions, and runtime parameters to build sophisticated robotic behaviors",keywords:["rclpy","services","actions","parameters","request-response","async","callbacks","AI integration"],sidebar_position:3,learning_objectives:["Implement service servers and clients for request-response communication","Create action servers and clients for long-running tasks with feedback","Apply parameters for runtime configuration of nodes","Design AI-ROS integration patterns separating decision logic from communication"],prerequisites:["Chapter 2: ROS 2 Nodes and Topics","Python async/await basics","Object-oriented programming"],estimated_time:120,content_type:"tutorial",difficulty:"intermediate",ros2_distribution:"humble",chapter_number:3},l="Chapter 3: Services, Actions, and Parameters",c={},o=[{value:"3.1 Services: Request-Response Communication",id:"31-services-request-response-communication",level:2},{value:"3.1.1 Service Definitions",id:"311-service-definitions",level:3},{value:"3.1.2 Creating a Service Server",id:"312-creating-a-service-server",level:3},{value:"3.1.3 Creating a Service Client",id:"313-creating-a-service-client",level:3},{value:"3.1.4 Service Communication Flow",id:"314-service-communication-flow",level:3},{value:"3.2 Actions: Long-Running Tasks with Feedback",id:"32-actions-long-running-tasks-with-feedback",level:2},{value:"3.2.1 Action Definitions",id:"321-action-definitions",level:3},{value:"3.2.2 Creating an Action Server",id:"322-creating-an-action-server",level:3},{value:"3.2.3 Creating an Action Client",id:"323-creating-an-action-client",level:3},{value:"3.2.4 Action Communication Flow",id:"324-action-communication-flow",level:3},{value:"3.3 Parameters: Runtime Configuration",id:"33-parameters-runtime-configuration",level:2},{value:"3.3.1 Declaring and Using Parameters",id:"331-declaring-and-using-parameters",level:3},{value:"3.3.2 Dynamic Parameter Updates with Callbacks",id:"332-dynamic-parameter-updates-with-callbacks",level:3},{value:"3.4 AI-ROS Integration Patterns",id:"34-ai-ros-integration-patterns",level:2},{value:"3.4.1 AI Agent Pattern",id:"341-ai-agent-pattern",level:3},{value:"3.5 Hands-On Exercise: Implement a Calculator Service",id:"35-hands-on-exercise-implement-a-calculator-service",level:2},{value:"Problem Statement",id:"problem-statement",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Testing",id:"testing",level:3},{value:"Deliverable",id:"deliverable",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"\u2713 Core Concepts Mastered",id:"-core-concepts-mastered",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{CodeExample:r,ConceptCallout:s,ExerciseBlock:a}=n;return r||p("CodeExample",!0),s||p("ConceptCallout",!0),a||p("ExerciseBlock",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-3-services-actions-and-parameters",children:"Chapter 3: Services, Actions, and Parameters"})}),"\n",(0,i.jsxs)(n.p,{children:["In Chapter 2, you learned about ",(0,i.jsx)(n.strong,{children:"topics"}),"\u2014the asynchronous, many-to-many communication pattern ideal for streaming sensor data. But not all robot communication fits the publish-subscribe model. What if you need:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A one-time computation"})," (e.g., inverse kinematics for an arm)?\r\n\u2192 Use ",(0,i.jsx)(n.strong,{children:"services"})," (synchronous request-response)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A long-running task with progress updates"})," (e.g., navigate to a waypoint)?\r\n\u2192 Use ",(0,i.jsx)(n.strong,{children:"actions"})," (asynchronous with feedback)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configurable behavior"})," (e.g., adjust PID gains at runtime)?\r\n\u2192 Use ",(0,i.jsx)(n.strong,{children:"parameters"})," (dynamic configuration)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This chapter teaches you these advanced communication primitives and shows how to integrate ",(0,i.jsx)(n.strong,{children:"AI decision logic"})," with ROS 2 control systems."]}),"\n",(0,i.jsx)(n.h2,{id:"31-services-request-response-communication",children:"3.1 Services: Request-Response Communication"}),"\n",(0,i.jsxs)(s,{type:"definition",title:"What is a Service?",children:[(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"service"})," is a synchronous, one-to-one communication pattern:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Client"})," sends a ",(0,i.jsx)(n.strong,{children:"request"})," to a ",(0,i.jsx)(n.strong,{children:"server"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server"})," processes the request and returns a ",(0,i.jsx)(n.strong,{children:"response"})]}),"\n",(0,i.jsxs)(n.li,{children:["Communication is ",(0,i.jsx)(n.strong,{children:"blocking"}),": client waits for the response (or times out)"]}),"\n"]}),(0,i.jsx)(n.p,{children:"Use services for:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Infrequent operations (trigger calibration, query robot state)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Computationally intensive tasks (path planning, inverse kinematics)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Configuration changes (reset odometry, switch modes)"}),"\n",(0,i.jsx)(n.li,{children:"\u274c High-frequency data streams (use topics)"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Tasks taking > 1 second (use actions for feedback)"}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"311-service-definitions",children:"3.1.1 Service Definitions"}),"\n",(0,i.jsxs)(n.p,{children:["ROS 2 services use ",(0,i.jsx)(n.code,{children:".srv"})," files defining request and response types:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# example_interfaces/srv/AddTwoInts.srv\r\nint64 a\r\nint64 b\r\n---\r\nint64 sum\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"---"})," separator divides request (top) from response (bottom). Standard service types include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"std_srvs/srv/Trigger"}),": No request data, bool response + message"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"std_srvs/srv/SetBool"}),": Bool request, bool response + message"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"example_interfaces/srv/AddTwoInts"}),": Two integers \u2192 sum"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"312-creating-a-service-server",children:"3.1.2 Creating a Service Server"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"service server"})," listens for requests and executes a callback function:"]}),"\n",(0,i.jsx)(r,{language:"python",filename:"add_two_ints_server.py",difficulty:"intermediate",estimatedTime:20,children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddTwoIntsServer(Node):\n  def __init__(self):\n      super().__init__('add_two_ints_server')\n\n      # Create service: service type, service name, callback function\n      self.srv = self.create_service(\n          AddTwoInts,\n          'add_two_ints',\n          self.add_two_ints_callback\n      )\n\n      self.get_logger().info('Add Two Ints Server started')\n\n  def add_two_ints_callback(self, request, response):\n      \"\"\"Service callback: receives request, populates response\"\"\"\n      response.sum = request.a + request.b\n      self.get_logger().info(\n          f'Incoming request: a={request.a}, b={request.b}'\n      )\n      self.get_logger().info(f'Sending response: sum={response.sum}')\n      return response\n\ndef main(args=None):\n  rclpy.init(args=args)\n  node = AddTwoIntsServer()\n  rclpy.spin(node)\n  node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Service Server API:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"self.srv = self.create_service(\r\n    srv_type=AddTwoInts,           # Service type (from .srv file)\r\n    srv_name='add_two_ints',       # Service name (string)\r\n    callback=self.callback_function  # Function to handle requests\r\n)\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Callback Signature:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def callback(self, request, response):\r\n    # request: object with fields from request part of .srv\r\n    # response: object with fields from response part of .srv\r\n    response.field1 = compute_value()\r\n    return response  # MUST return response object\n"})}),"\n",(0,i.jsx)(n.h3,{id:"313-creating-a-service-client",children:"3.1.3 Creating a Service Client"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"service client"})," sends requests and waits for responses:"]}),"\n",(0,i.jsx)(r,{language:"python",filename:"add_two_ints_client.py",difficulty:"intermediate",estimatedTime:20,children:"import sys\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddTwoIntsClient(Node):\n  def __init__(self):\n      super().__init__('add_two_ints_client')\n\n      # Create client: service type, service name\n      self.client = self.create_client(AddTwoInts, 'add_two_ints')\n\n      # Wait for service to be available (timeout after 5 seconds)\n      while not self.client.wait_for_service(timeout_sec=5.0):\n          self.get_logger().info('Service not available, waiting...')\n\n      self.req = AddTwoInts.Request()\n\n  def send_request(self, a, b):\n      \"\"\"Send async request and return future\"\"\"\n      self.req.a = a\n      self.req.b = b\n      self.future = self.client.call_async(self.req)\n      return self.future\n\ndef main(args=None):\n  rclpy.init(args=args)\n\n  if len(sys.argv) != 3:\n      print('Usage: python3 add_two_ints_client.py <a> <b>')\n      return\n\n  client_node = AddTwoIntsClient()\n  future = client_node.send_request(int(sys.argv[1]), int(sys.argv[2]))\n\n  # Spin until response received\n  rclpy.spin_until_future_complete(client_node, future)\n\n  if future.result() is not None:\n      response = future.result()\n      client_node.get_logger().info(\n          f'Result: {sys.argv[1]} + {sys.argv[2]} = {response.sum}'\n      )\n  else:\n      client_node.get_logger().error('Service call failed')\n\n  client_node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Service Client API:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# 1. Create client\r\nself.client = self.create_client(AddTwoInts, 'add_two_ints')\r\n\r\n# 2. Wait for service availability\r\nself.client.wait_for_service(timeout_sec=5.0)\r\n\r\n# 3. Create request object\r\nrequest = AddTwoInts.Request()\r\nrequest.a = 10\r\nrequest.b = 20\r\n\r\n# 4. Call service asynchronously\r\nfuture = self.client.call_async(request)\r\n\r\n# 5. Wait for response\r\nrclpy.spin_until_future_complete(node, future)\r\nresponse = future.result()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"314-service-communication-flow",children:"3.1.4 Service Communication Flow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\r\n    participant Client as Service Client<br/>(AddTwoIntsClient)\r\n    participant Server as Service Server<br/>(AddTwoIntsServer)\r\n\r\n    Client->>Client: create_client()\r\n    Client->>Server: wait_for_service()\r\n    Note over Server: Server already running\r\n\r\n    Client->>Server: call_async(Request{a=5, b=3})\r\n    Note over Client: Non-blocking call,<br/>returns Future\r\n\r\n    activate Server\r\n    Server->>Server: add_two_ints_callback()\r\n    Server->>Server: Compute: 5 + 3 = 8\r\n    Server->>Client: Response{sum=8}\r\n    deactivate Server\r\n\r\n    Client->>Client: future.result() = 8\r\n    Note over Client: Blocking wait for Future\n"})}),"\n",(0,i.jsxs)(s,{type:"tip",title:"Async vs Blocking Service Calls",children:[(0,i.jsx)(n.p,{children:"ROS 2 supports two service call patterns:"}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Async (Recommended)"}),":"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"future = self.client.call_async(request)\r\nrclpy.spin_until_future_complete(node, future)\r\nresponse = future.result()\n"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Non-blocking: node can process other callbacks while waiting"}),"\n",(0,i.jsx)(n.li,{children:"Better for multi-node systems"}),"\n"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Synchronous (Legacy, avoid)"}),":"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"response = self.client.call(request)  # Blocks entire node!\n"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Blocks node from processing other callbacks"}),"\n",(0,i.jsx)(n.li,{children:"Can cause deadlocks in complex systems"}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"32-actions-long-running-tasks-with-feedback",children:"3.2 Actions: Long-Running Tasks with Feedback"}),"\n",(0,i.jsxs)(n.p,{children:["Services are great for quick computations, but what about tasks that take seconds or minutes? ",(0,i.jsx)(n.strong,{children:"Actions"})," extend the service pattern with:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feedback"}),": Server sends progress updates during execution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cancellation"}),": Client can cancel the goal mid-execution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Result"}),": Final outcome when task completes"]}),"\n"]}),"\n",(0,i.jsxs)(s,{type:"concept",title:"When to Use Actions",children:[(0,i.jsx)(n.p,{children:"Use actions for tasks that:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Take > 1 second to complete (navigation, object manipulation)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Require progress updates (distance to goal, current phase)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Can be cancelled (stop navigation, abort grasp)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Have distinct success/failure outcomes"}),"\n"]}),(0,i.jsx)(n.p,{children:"Examples:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Navigate to waypoint (feedback: distance remaining)"}),"\n",(0,i.jsx)(n.li,{children:"Grasp object (feedback: gripper closure percentage)"}),"\n",(0,i.jsx)(n.li,{children:"Execute dance sequence (feedback: current pose index)"}),"\n",(0,i.jsx)(n.li,{children:"Train neural network (feedback: epoch, loss)"}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"321-action-definitions",children:"3.2.1 Action Definitions"}),"\n",(0,i.jsxs)(n.p,{children:["Actions use ",(0,i.jsx)(n.code,{children:".action"})," files with three parts:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# example_interfaces/action/Fibonacci.action\r\n# Goal\r\nint32 order\r\n---\r\n# Result\r\nint32[] sequence\r\n---\r\n# Feedback\r\nint32[] partial_sequence\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Three sections"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),': What the client requests (e.g., "navigate to (x, y)")']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Result"}),': Final outcome (e.g., "reached goal" or "failed - obstacle")']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feedback"}),': Periodic updates (e.g., "50% complete, 2.3m remaining")']}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"322-creating-an-action-server",children:"3.2.2 Creating an Action Server"}),"\n",(0,i.jsx)(r,{language:"python",filename:"fibonacci_action_server.py",difficulty:"advanced",estimatedTime:30,children:"import time\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.action import ActionServer\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n  def __init__(self):\n      super().__init__('fibonacci_action_server')\n\n      # Create action server: action type, action name, execute callback\n      self._action_server = ActionServer(\n          self,\n          Fibonacci,\n          'fibonacci',\n          self.execute_callback\n      )\n\n      self.get_logger().info('Fibonacci Action Server started')\n\n  def execute_callback(self, goal_handle):\n      \"\"\"Execute the action: generate Fibonacci sequence\"\"\"\n      self.get_logger().info('Executing goal...')\n\n      feedback_msg = Fibonacci.Feedback()\n      feedback_msg.partial_sequence = [0, 1]\n\n      # Generate Fibonacci sequence up to order N\n      for i in range(1, goal_handle.request.order):\n          # Check if cancellation requested\n          if goal_handle.is_cancel_requested:\n              goal_handle.canceled()\n              self.get_logger().info('Goal canceled')\n              return Fibonacci.Result()\n\n          # Compute next Fibonacci number\n          feedback_msg.partial_sequence.append(\n              feedback_msg.partial_sequence[i] +\n              feedback_msg.partial_sequence[i - 1]\n          )\n\n          # Publish feedback\n          self.get_logger().info(\n              f'Feedback: {feedback_msg.partial_sequence}'\n          )\n          goal_handle.publish_feedback(feedback_msg)\n\n          time.sleep(1)  # Simulate long-running computation\n\n      # Mark goal as succeeded and return result\n      goal_handle.succeed()\n\n      result = Fibonacci.Result()\n      result.sequence = feedback_msg.partial_sequence\n      self.get_logger().info(f'Result: {result.sequence}')\n      return result\n\ndef main(args=None):\n  rclpy.init(args=args)\n  node = FibonacciActionServer()\n  rclpy.spin(node)\n  node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Action Server API:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"self._action_server = ActionServer(\r\n    node=self,                     # Parent node\r\n    action_type=Fibonacci,         # Action type\r\n    action_name='fibonacci',       # Action name\r\n    execute_callback=self.execute  # Callback function\r\n)\r\n\r\ndef execute_callback(self, goal_handle):\r\n    # 1. Access goal: goal_handle.request.field\r\n    order = goal_handle.request.order\r\n\r\n    # 2. Publish feedback periodically\r\n    feedback = Fibonacci.Feedback()\r\n    goal_handle.publish_feedback(feedback)\r\n\r\n    # 3. Check for cancellation\r\n    if goal_handle.is_cancel_requested:\r\n        goal_handle.canceled()\r\n        return Fibonacci.Result()\r\n\r\n    # 4. Mark as succeeded and return result\r\n    goal_handle.succeed()\r\n    result = Fibonacci.Result()\r\n    return result\n"})}),"\n",(0,i.jsx)(n.h3,{id:"323-creating-an-action-client",children:"3.2.3 Creating an Action Client"}),"\n",(0,i.jsx)(r,{language:"python",filename:"fibonacci_action_client.py",difficulty:"advanced",estimatedTime:25,children:'import rclpy\nfrom rclpy.node import Node\nfrom rclpy.action import ActionClient\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionClient(Node):\n  def __init__(self):\n      super().__init__(\'fibonacci_action_client\')\n\n      # Create action client\n      self._action_client = ActionClient(\n          self,\n          Fibonacci,\n          \'fibonacci\'\n      )\n\n  def send_goal(self, order):\n      """Send goal and register callbacks"""\n      goal_msg = Fibonacci.Goal()\n      goal_msg.order = order\n\n      self.get_logger().info(\'Waiting for action server...\')\n      self._action_client.wait_for_server()\n\n      self.get_logger().info(f\'Sending goal: order={order}\')\n\n      # Send goal with feedback callback\n      self._send_goal_future = self._action_client.send_goal_async(\n          goal_msg,\n          feedback_callback=self.feedback_callback\n      )\n\n      # Register callback for goal acceptance\n      self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n  def goal_response_callback(self, future):\n      """Called when server accepts/rejects goal"""\n      goal_handle = future.result()\n\n      if not goal_handle.accepted:\n          self.get_logger().info(\'Goal rejected\')\n          return\n\n      self.get_logger().info(\'Goal accepted\')\n\n      # Get result asynchronously\n      self._get_result_future = goal_handle.get_result_async()\n      self._get_result_future.add_done_callback(self.get_result_callback)\n\n  def feedback_callback(self, feedback_msg):\n      """Called periodically during execution"""\n      feedback = feedback_msg.feedback\n      self.get_logger().info(\n          f\'Received feedback: {feedback.partial_sequence}\'\n      )\n\n  def get_result_callback(self, future):\n      """Called when action completes"""\n      result = future.result().result\n      self.get_logger().info(f\'Result: {result.sequence}\')\n      rclpy.shutdown()\n\ndef main(args=None):\n  rclpy.init(args=args)\n  action_client = FibonacciActionClient()\n  action_client.send_goal(10)\n  rclpy.spin(action_client)\n\nif __name__ == \'__main__\':\n  main()\n'}),"\n",(0,i.jsx)(n.h3,{id:"324-action-communication-flow",children:"3.2.4 Action Communication Flow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\r\n    participant Client as Action Client\r\n    participant Server as Action Server\r\n\r\n    Client->>Server: send_goal_async(Goal{order=10})\r\n    Server->>Client: Goal Accepted\r\n\r\n    loop Every computation step\r\n        Server->>Server: Compute next Fibonacci\r\n        Server->>Client: Feedback{partial_sequence}\r\n        Note over Client: feedback_callback()\r\n    end\r\n\r\n    alt Goal Succeeded\r\n        Server->>Client: Result{sequence=[0,1,1,2,3,5,...]}\r\n        Note over Client: get_result_callback()\r\n    else Goal Canceled\r\n        Client->>Server: cancel_goal()\r\n        Server->>Client: Result{} (empty)\r\n    end\n"})}),"\n",(0,i.jsx)(n.h2,{id:"33-parameters-runtime-configuration",children:"3.3 Parameters: Runtime Configuration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"})," allow you to configure node behavior at runtime without restarting the node."]}),"\n",(0,i.jsxs)(s,{type:"definition",title:"What are Parameters?",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"})," are key-value pairs stored in each node:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Types: ",(0,i.jsx)(n.code,{children:"bool"}),", ",(0,i.jsx)(n.code,{children:"int"}),", ",(0,i.jsx)(n.code,{children:"float"}),", ",(0,i.jsx)(n.code,{children:"string"}),", ",(0,i.jsx)(n.code,{children:"byte_array"}),", ",(0,i.jsx)(n.code,{children:"bool_array"}),", ",(0,i.jsx)(n.code,{children:"int_array"}),", ",(0,i.jsx)(n.code,{children:"float_array"}),", ",(0,i.jsx)(n.code,{children:"string_array"})]}),"\n",(0,i.jsx)(n.li,{children:"Can be set via command line, launch files, or programmatically"}),"\n",(0,i.jsx)(n.li,{children:"Support dynamic updates with parameter callbacks"}),"\n"]}),(0,i.jsx)(n.p,{children:"Use cases:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Tunable constants (PID gains, thresholds, timeouts)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Mode switching (debug mode, simulation vs. hardware)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Resource paths (model files, config files)"}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"331-declaring-and-using-parameters",children:"3.3.1 Declaring and Using Parameters"}),"\n",(0,i.jsx)(r,{language:"python",filename:"parameter_example.py",difficulty:"beginner",estimatedTime:15,children:"import rclpy\nfrom rclpy.node import Node\n\nclass ParameterNode(Node):\n  def __init__(self):\n      super().__init__('parameter_node')\n\n      # Declare parameters with default values\n      self.declare_parameter('robot_name', 'atlas')\n      self.declare_parameter('max_speed', 1.5)  # m/s\n      self.declare_parameter('debug_mode', False)\n\n      # Get parameter values\n      robot_name = self.get_parameter('robot_name').value\n      max_speed = self.get_parameter('max_speed').value\n      debug_mode = self.get_parameter('debug_mode').value\n\n      self.get_logger().info(f'Robot: {robot_name}')\n      self.get_logger().info(f'Max Speed: {max_speed} m/s')\n      self.get_logger().info(f'Debug Mode: {debug_mode}')\n\n      # Use parameters in node logic\n      self.timer = self.create_timer(\n          1.0,\n          lambda: self.get_logger().info(\n              f'Max speed: {self.get_parameter(\"max_speed\").value}'\n          )\n      )\n\ndef main(args=None):\n  rclpy.init(args=args)\n  node = ParameterNode()\n  rclpy.spin(node)\n  node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Setting Parameters at Launch:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Command line\r\nros2 run my_package parameter_node --ros-args \\\r\n  -p robot_name:=optimus \\\r\n  -p max_speed:=2.0 \\\r\n  -p debug_mode:=true\r\n\r\n# Inspect parameters\r\nros2 param list\r\nros2 param get /parameter_node robot_name\r\nros2 param set /parameter_node max_speed 3.0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"332-dynamic-parameter-updates-with-callbacks",children:"3.3.2 Dynamic Parameter Updates with Callbacks"}),"\n",(0,i.jsx)(r,{language:"python",filename:"parameter_callback_example.py",difficulty:"intermediate",children:"import rclpy\nfrom rclpy.node import Node\nfrom rcl_interfaces.msg import SetParametersResult\n\nclass DynamicParameterNode(Node):\n  def __init__(self):\n      super().__init__('dynamic_parameter_node')\n\n      self.declare_parameter('threshold', 50.0)\n\n      # Register parameter callback\n      self.add_on_set_parameters_callback(self.parameter_callback)\n\n      self.get_logger().info('Dynamic Parameter Node started')\n\n  def parameter_callback(self, params):\n      \"\"\"Called whenever parameters are updated\"\"\"\n      for param in params:\n          if param.name == 'threshold':\n              if param.value < 0.0 or param.value > 100.0:\n                  self.get_logger().warn(\n                      f'Invalid threshold: {param.value} (must be 0-100)'\n                  )\n                  return SetParametersResult(successful=False)\n\n              self.get_logger().info(\n                  f'Threshold updated: {param.value}'\n              )\n\n      return SetParametersResult(successful=True)\n\ndef main(args=None):\n  rclpy.init(args=args)\n  node = DynamicParameterNode()\n  rclpy.spin(node)\n  node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,i.jsxs)(s,{type:"tip",title:"Parameter Validation",children:[(0,i.jsx)(n.p,{children:"Always validate parameters in callbacks:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Range checks"}),": Ensure values are within acceptable bounds"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type checks"}),": Verify correct data types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Return ",(0,i.jsx)(n.code,{children:"SetParametersResult"})]}),": ",(0,i.jsx)(n.code,{children:"successful=True"})," to accept, ",(0,i.jsx)(n.code,{children:"False"})," to reject"]}),"\n"]}),(0,i.jsx)(n.p,{children:"Rejecting invalid parameters prevents runtime errors from bad configuration."})]}),"\n",(0,i.jsx)(n.h2,{id:"34-ai-ros-integration-patterns",children:"3.4 AI-ROS Integration Patterns"}),"\n",(0,i.jsxs)(n.p,{children:["Now let's bridge everything together: integrating ",(0,i.jsx)(n.strong,{children:"AI decision logic"})," with ROS 2 communication."]}),"\n",(0,i.jsxs)(s,{type:"concept",title:"Separation of Concerns",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best Practice"}),": Separate AI logic from ROS communication:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502       ROS 2 Node (Wrapper)          \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\r\n\u2502  \u2502    AI Agent (Pure Python)   \u2502    \u2502\r\n\u2502  \u2502  \u2022 Decision logic            \u2502    \u2502\r\n\u2502  \u2502  \u2022 State machine             \u2502    \u2502\r\n\u2502  \u2502  \u2022 No ROS dependencies       \u2502    \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\r\n\u2502                                     \u2502\r\n\u2502  \u2022 Publishers/Subscribers           \u2502\r\n\u2502  \u2022 Service clients                  \u2502\r\n\u2502  \u2022 Action servers                   \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Benefits"}),":"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Test AI logic independently (no ROS needed)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Reuse AI code across different robot platforms"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Easier debugging (separate ROS communication from decision logic)"}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"341-ai-agent-pattern",children:"3.4.1 AI Agent Pattern"}),"\n",(0,i.jsx)(r,{language:"python",filename:"ai_robot_controller.py",difficulty:"advanced",estimatedTime:40,children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\nfrom sensor_msgs.msg import LaserScan\nfrom enum import Enum\nimport math\n\nclass RobotState(Enum):\n  \"\"\"Finite state machine states\"\"\"\n  FORWARD = 1\n  TURNING_LEFT = 2\n  TURNING_RIGHT = 3\n  STOPPED = 4\n\nclass ObstacleAvoidanceAI:\n  \"\"\"Pure Python AI agent - no ROS dependencies\"\"\"\n\n  def __init__(self, obstacle_distance_threshold=0.5):\n      self.state = RobotState.FORWARD\n      self.obstacle_threshold = obstacle_distance_threshold\n\n  def decide_action(self, laser_data):\n      \"\"\"\n      AI decision logic: analyze sensor data, return velocity command\n\n      Args:\n          laser_data: dict with 'front', 'left', 'right' distances\n\n      Returns:\n          dict: {'linear': float, 'angular': float}\n      \"\"\"\n      front_dist = laser_data.get('front', float('inf'))\n      left_dist = laser_data.get('left', float('inf'))\n      right_dist = laser_data.get('right', float('inf'))\n\n      # State machine logic\n      if front_dist < self.obstacle_threshold:\n          # Obstacle ahead - turn towards open side\n          if left_dist > right_dist:\n              self.state = RobotState.TURNING_LEFT\n              return {'linear': 0.0, 'angular': 0.5}\n          else:\n              self.state = RobotState.TURNING_RIGHT\n              return {'linear': 0.0, 'angular': -0.5}\n      else:\n          # Clear path - move forward\n          self.state = RobotState.FORWARD\n          return {'linear': 0.3, 'angular': 0.0}\n\nclass AIRobotController(Node):\n  \"\"\"ROS 2 wrapper for AI agent\"\"\"\n\n  def __init__(self):\n      super().__init__('ai_robot_controller')\n\n      # Initialize AI agent (pure Python)\n      self.ai_agent = ObstacleAvoidanceAI(obstacle_distance_threshold=0.5)\n\n      # ROS 2 communication\n      self.cmd_vel_pub = self.create_publisher(Twist, 'cmd_vel', 10)\n      self.laser_sub = self.create_subscription(\n          LaserScan,\n          'scan',\n          self.laser_callback,\n          10\n      )\n\n      # Control loop timer (10 Hz decision rate)\n      self.timer = self.create_timer(0.1, self.control_loop)\n\n      self.latest_laser_data = None\n      self.get_logger().info('AI Robot Controller started')\n\n  def laser_callback(self, msg):\n      \"\"\"Store latest laser scan data\"\"\"\n      # Convert LaserScan to simplified format for AI\n      ranges = msg.ranges\n      self.latest_laser_data = {\n          'front': min(ranges[0:30] + ranges[-30:]),  # Front 60 degrees\n          'left': min(ranges[30:90]),                  # Left 60 degrees\n          'right': min(ranges[-90:-30])                # Right 60 degrees\n      }\n\n  def control_loop(self):\n      \"\"\"10 Hz decision loop\"\"\"\n      if self.latest_laser_data is None:\n          return  # No sensor data yet\n\n      # AI decision\n      action = self.ai_agent.decide_action(self.latest_laser_data)\n\n      # Publish command\n      cmd_msg = Twist()\n      cmd_msg.linear.x = action['linear']\n      cmd_msg.angular.z = action['angular']\n      self.cmd_vel_pub.publish(cmd_msg)\n\n      self.get_logger().info(\n          f'State: {self.ai_agent.state.name}, '\n          f'Cmd: linear={action[\"linear\"]:.2f}, '\n          f'angular={action[\"angular\"]:.2f}'\n      )\n\ndef main(args=None):\n  rclpy.init(args=args)\n  node = AIRobotController()\n  rclpy.spin(node)\n  node.destroy_node()\n  rclpy.shutdown()\n\nif __name__ == '__main__':\n  main()\n"}),"\n",(0,i.jsxs)(s,{type:"warning",title:"Latency Considerations",children:[(0,i.jsx)(n.p,{children:"For real-time control, keep decision cycles fast:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Target"}),": < 100ms per decision cycle (10 Hz minimum)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Profile your AI"}),": Measure ",(0,i.jsx)(n.code,{children:"decide_action()"})," execution time"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Async operations"}),": Use action servers for long computations (> 1 second)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Queue management"}),": Use QoS ",(0,i.jsx)(n.code,{children:"KEEP_LAST"})," with depth=1 for latest sensor data"]}),"\n"]}),(0,i.jsx)(n.p,{children:"If AI inference is slow (e.g., deep neural networks):"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Run inference in separate thread"}),"\n",(0,i.jsx)(n.li,{children:"Use GPU acceleration (CUDA)"}),"\n",(0,i.jsx)(n.li,{children:"Consider offloading to edge device (NVIDIA Jetson)"}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"35-hands-on-exercise-implement-a-calculator-service",children:"3.5 Hands-On Exercise: Implement a Calculator Service"}),"\n",(0,i.jsxs)(a,{title:"Multi-Operation Calculator Service",difficulty:"intermediate",estimatedTime:45,objectives:["Create a service server that performs multiple mathematical operations","Implement a service client that calls the calculator service","Handle invalid inputs with proper error messages","Test the service using both Python client and ros2 service call CLI"],hints:["Define custom .srv file with operation field (add, subtract, multiply, divide)","Use string parameter for operation type: 'add', 'subtract', 'multiply', 'divide'","Return success=False for division by zero","Test with: ros2 service call /calculator my_package/srv/Calculate \"{{a: 10, b: 5, operation: 'add'}}\""],children:[(0,i.jsx)(n.h3,{id:"problem-statement",children:"Problem Statement"}),(0,i.jsx)(n.p,{children:"Create a calculator service that supports four operations: addition, subtraction, multiplication, and division."}),(0,i.jsx)(n.h3,{id:"requirements",children:"Requirements"}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Service Definition"})," (",(0,i.jsx)(n.code,{children:"srv/Calculate.srv"}),"):"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'float64 a\r\nfloat64 b\r\nstring operation  # "add", "subtract", "multiply", "divide"\r\n---\r\nfloat64 result\r\nbool success\r\nstring message\n'})}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Service Server"})," (",(0,i.jsx)(n.code,{children:"calculator_server.py"}),"):"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Service name: ",(0,i.jsx)(n.code,{children:"/calculator"})]}),"\n",(0,i.jsx)(n.li,{children:"Support all four operations"}),"\n",(0,i.jsxs)(n.li,{children:["Return ",(0,i.jsx)(n.code,{children:"success=False"})," and error message for:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Division by zero"}),"\n",(0,i.jsx)(n.li,{children:"Invalid operation string"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Log each request and response"}),"\n"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Service Client"})," (",(0,i.jsx)(n.code,{children:"calculator_client.py"}),"):"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Accept command-line arguments: ",(0,i.jsx)(n.code,{children:"a b operation"})]}),"\n",(0,i.jsx)(n.li,{children:"Call service and display result"}),"\n",(0,i.jsx)(n.li,{children:"Handle service call failures gracefully"}),"\n"]}),(0,i.jsx)(n.h3,{id:"testing",children:"Testing"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Run server\r\npython3 calculator_server.py\r\n\r\n# Terminal 2: Test with client\r\npython3 calculator_client.py 15.5 3.2 add\r\npython3 calculator_client.py 10 0 divide  # Should fail gracefully\r\n\r\n# Terminal 3: Test with CLI\r\nros2 service call /calculator my_package/srv/Calculate \\\r\n  \"{a: 100, b: 25, operation: 'subtract'}\"\n"})}),(0,i.jsx)(n.h3,{id:"deliverable",children:"Deliverable"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Three files: ",(0,i.jsx)(n.code,{children:"Calculate.srv"}),", ",(0,i.jsx)(n.code,{children:"calculator_server.py"}),", ",(0,i.jsx)(n.code,{children:"calculator_client.py"})]}),"\n",(0,i.jsx)(n.li,{children:"Screenshot showing successful addition and failed division by zero"}),"\n",(0,i.jsx)(n.li,{children:"Answer: How would you extend this to support exponentiation?"}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)("div",{className:"key-takeaways",children:[(0,i.jsx)(n.h3,{id:"-core-concepts-mastered",children:"\u2713 Core Concepts Mastered"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Services provide synchronous request-response communication"})," for infrequent operations like computations, triggers, and queries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Actions extend services with feedback and cancellation"})," for long-running tasks (> 1 second) like navigation and manipulation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Action servers publish periodic feedback"})," during execution, allowing clients to monitor progress and cancel goals"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters enable runtime configuration"})," with dynamic updates through callbacks and validation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AI-ROS integration follows separation of concerns"})," with pure Python AI logic wrapped in ROS nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Async service calls"})," (",(0,i.jsx)(n.code,{children:"call_async"}),") are preferred over blocking calls to prevent node deadlocks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time control requires < 100ms decision cycles"})," with profiling and optimization for AI inference latency"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"Chapter 4: URDF Robot Modeling"}),", you'll learn to define robot structure:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"URDF syntax for links (rigid bodies) and joints (connections)"}),"\n",(0,i.jsx)(n.li,{children:"Visual and collision geometry for simulation"}),"\n",(0,i.jsx)(n.li,{children:"Kinematic chains for humanoid robots"}),"\n",(0,i.jsx)(n.li,{children:"RViz2 visualization with joint_state_publisher"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Prerequisite Check"}),": Before proceeding, ensure you can:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Create a service server and client for a custom service type"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Explain when to use services vs. actions"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Implement parameter validation with callbacks"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Separate AI decision logic from ROS communication code"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next"}),": Chapter 4: URDF Robot Modeling (coming soon)"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function p(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);